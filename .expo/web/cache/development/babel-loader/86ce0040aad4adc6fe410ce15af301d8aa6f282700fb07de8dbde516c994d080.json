{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nexports.__esModule = true;\nexports.default = void 0;\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _initializerDefineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/initializerDefineProperty\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _applyDecoratedDescriptor2 = _interopRequireDefault(require(\"@babel/runtime/helpers/applyDecoratedDescriptor\"));\nvar _initializerWarningHelper2 = _interopRequireDefault(require(\"@babel/runtime/helpers/initializerWarningHelper\"));\nvar _allPromises = _interopRequireDefault(require(\"../utils/fp/allPromises\"));\nvar _invariant = _interopRequireDefault(require(\"../utils/common/invariant\"));\nvar _rx = require(\"../utils/rx\");\nvar _Result = require(\"../utils/fp/Result\");\nvar _fp = require(\"../utils/fp\");\nvar _subscriptions = require(\"../utils/subscriptions\");\nvar _lazy = _interopRequireDefault(require(\"../decorators/lazy\"));\nvar _subscribeToCount = _interopRequireDefault(require(\"../observation/subscribeToCount\"));\nvar _subscribeToQuery = _interopRequireDefault(require(\"../observation/subscribeToQuery\"));\nvar _subscribeToQueryWithColumns = _interopRequireDefault(require(\"../observation/subscribeToQueryWithColumns\"));\nvar Q = _interopRequireWildcard(require(\"../QueryDescription\"));\nvar _helpers = require(\"./helpers\");\nvar _class, _descriptor, _descriptor2, _descriptor3, _class2;\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (\"function\" !== typeof WeakMap) return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n  if (null === obj || \"object\" !== typeof obj && \"function\" !== typeof obj) {\n    return {\n      default: obj\n    };\n  }\n  var cache = _getRequireWildcardCache(nodeInterop);\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var key in obj) {\n    if (\"default\" !== key && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n  newObj.default = obj;\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n  return newObj;\n}\nvar Query = (_class = (_class2 = function () {\n  function Query(collection, clauses) {\n    (0, _initializerDefineProperty2.default)(this, \"_cachedSubscribable\", _descriptor, this);\n    (0, _initializerDefineProperty2.default)(this, \"_cachedCountSubscribable\", _descriptor2, this);\n    (0, _initializerDefineProperty2.default)(this, \"_cachedCountThrottledSubscribable\", _descriptor3, this);\n    this.collection = collection;\n    this._rawDescription = Q.buildQueryDescription(clauses);\n    this.description = Q.queryWithoutDeleted(this._rawDescription);\n  }\n  var _proto = Query.prototype;\n  _proto.extend = function extend() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    var clauses = (0, _fp.fromArrayOrSpread)(args, 'Collection.query', 'Clause');\n    var collection = this.collection;\n    var _this$_rawDescription = this._rawDescription,\n      where = _this$_rawDescription.where,\n      sortBy = _this$_rawDescription.sortBy,\n      take = _this$_rawDescription.take,\n      skip = _this$_rawDescription.skip,\n      joinTables = _this$_rawDescription.joinTables,\n      nestedJoinTables = _this$_rawDescription.nestedJoinTables,\n      lokiTransform = _this$_rawDescription.lokiTransform,\n      sql = _this$_rawDescription.sql;\n    (0, _invariant.default)(!sql, 'Cannot extend an unsafe SQL query');\n    return new Query(collection, [Q.experimentalJoinTables(joinTables)].concat((0, _toConsumableArray2.default)(nestedJoinTables.map(function (_ref) {\n      var from = _ref.from,\n        to = _ref.to;\n      return Q.experimentalNestedJoin(from, to);\n    })), (0, _toConsumableArray2.default)(where), (0, _toConsumableArray2.default)(sortBy), (0, _toConsumableArray2.default)(take ? [Q.take(take)] : []), (0, _toConsumableArray2.default)(skip ? [Q.skip(skip)] : []), (0, _toConsumableArray2.default)(lokiTransform ? [Q.unsafeLokiTransform(lokiTransform)] : []), (0, _toConsumableArray2.default)(clauses)));\n  };\n  _proto.pipe = function pipe(transform) {\n    return transform(this);\n  };\n  _proto.fetch = function fetch() {\n    var _this = this;\n    return (0, _Result.toPromise)(function (callback) {\n      return _this.collection._fetchQuery(_this, callback);\n    });\n  };\n  _proto.then = function then(onFulfill, onReject) {\n    return this.fetch().then(onFulfill, onReject);\n  };\n  _proto.observe = function observe() {\n    var _this2 = this;\n    return _rx.Observable.create(function (observer) {\n      return _this2._cachedSubscribable.subscribe(function (records) {\n        observer.next(records);\n      });\n    });\n  };\n  _proto.observeWithColumns = function observeWithColumns(columnNames) {\n    var _this3 = this;\n    return _rx.Observable.create(function (observer) {\n      return _this3.experimentalSubscribeWithColumns(columnNames, function (records) {\n        observer.next(records);\n      });\n    });\n  };\n  _proto.fetchCount = function fetchCount() {\n    var _this4 = this;\n    return (0, _Result.toPromise)(function (callback) {\n      return _this4.collection._fetchCount(_this4, callback);\n    });\n  };\n  _proto.observeCount = function observeCount() {\n    var isThrottled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    var _this5 = this;\n    return _rx.Observable.create(function (observer) {\n      var subscribable = isThrottled ? _this5._cachedCountThrottledSubscribable : _this5._cachedCountSubscribable;\n      return subscribable.subscribe(function (count) {\n        observer.next(count);\n      });\n    });\n  };\n  _proto.fetchIds = function fetchIds() {\n    var _this6 = this;\n    return (0, _Result.toPromise)(function (callback) {\n      return _this6.collection._fetchIds(_this6, callback);\n    });\n  };\n  _proto.unsafeFetchRaw = function unsafeFetchRaw() {\n    var _this7 = this;\n    return (0, _Result.toPromise)(function (callback) {\n      return _this7.collection._unsafeFetchRaw(_this7, callback);\n    });\n  };\n  _proto.experimentalSubscribe = function experimentalSubscribe(subscriber) {\n    return this._cachedSubscribable.subscribe(subscriber);\n  };\n  _proto.experimentalSubscribeWithColumns = function experimentalSubscribeWithColumns(columnNames, subscriber) {\n    return (0, _subscribeToQueryWithColumns.default)(this, columnNames, subscriber);\n  };\n  _proto.experimentalSubscribeToCount = function experimentalSubscribeToCount(subscriber) {\n    return this._cachedCountSubscribable.subscribe(subscriber);\n  };\n  _proto.markAllAsDeleted = function markAllAsDeleted() {\n    return new Promise(function ($return, $error) {\n      var records;\n      return Promise.resolve(this.fetch()).then(function ($await_1) {\n        try {\n          records = $await_1;\n          return Promise.resolve((0, _allPromises.default)(function (record) {\n            return record.markAsDeleted();\n          }, records)).then(function () {\n            try {\n              return $return();\n            } catch ($boundEx) {\n              return $error($boundEx);\n            }\n          }, $error);\n        } catch ($boundEx) {\n          return $error($boundEx);\n        }\n      }, $error);\n    }.bind(this));\n  };\n  _proto.destroyAllPermanently = function destroyAllPermanently() {\n    return new Promise(function ($return, $error) {\n      var records;\n      return Promise.resolve(this.fetch()).then(function ($await_3) {\n        try {\n          records = $await_3;\n          return Promise.resolve((0, _allPromises.default)(function (record) {\n            return record.destroyPermanently();\n          }, records)).then(function () {\n            try {\n              return $return();\n            } catch ($boundEx) {\n              return $error($boundEx);\n            }\n          }, $error);\n        } catch ($boundEx) {\n          return $error($boundEx);\n        }\n      }, $error);\n    }.bind(this));\n  };\n  _proto.serialize = function serialize() {\n    var table = this.table,\n      description = this.description,\n      associations = this.associations;\n    return {\n      table: table,\n      description: description,\n      associations: associations\n    };\n  };\n  (0, _createClass2.default)(Query, [{\n    key: \"count\",\n    get: function get() {\n      var model = this;\n      return {\n        then: function then(onFulfill, onReject) {\n          return model.fetchCount().then(onFulfill, onReject);\n        }\n      };\n    }\n  }, {\n    key: \"modelClass\",\n    get: function get() {\n      return this.collection.modelClass;\n    }\n  }, {\n    key: \"table\",\n    get: function get() {\n      return this.modelClass.table;\n    }\n  }, {\n    key: \"secondaryTables\",\n    get: function get() {\n      return this.description.joinTables.concat(this.description.nestedJoinTables.map(function (_ref2) {\n        var to = _ref2.to;\n        return to;\n      }));\n    }\n  }, {\n    key: \"allTables\",\n    get: function get() {\n      return [this.table].concat(this.secondaryTables);\n    }\n  }, {\n    key: \"associations\",\n    get: function get() {\n      return (0, _helpers.getAssociations)(this.description, this.modelClass, this.collection.db);\n    }\n  }]);\n  return Query;\n}(), _class2._wmelonTag = 'query', _class2), _descriptor = (0, _applyDecoratedDescriptor2.default)(_class.prototype, \"_cachedSubscribable\", [_lazy.default], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this8 = this;\n    return new _subscriptions.SharedSubscribable(function (subscriber) {\n      return (0, _subscribeToQuery.default)(_this8, subscriber);\n    });\n  }\n}), _descriptor2 = (0, _applyDecoratedDescriptor2.default)(_class.prototype, \"_cachedCountSubscribable\", [_lazy.default], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this9 = this;\n    return new _subscriptions.SharedSubscribable(function (subscriber) {\n      return (0, _subscribeToCount.default)(_this9, false, subscriber);\n    });\n  }\n}), _descriptor3 = (0, _applyDecoratedDescriptor2.default)(_class.prototype, \"_cachedCountThrottledSubscribable\", [_lazy.default], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this10 = this;\n    return new _subscriptions.SharedSubscribable(function (subscriber) {\n      return (0, _subscribeToCount.default)(_this10, true, subscriber);\n    });\n  }\n}), _class);\nexports.default = Query;","map":{"version":3,"names":["_interopRequireDefault","require","exports","__esModule","default","_toConsumableArray2","_initializerDefineProperty2","_createClass2","_applyDecoratedDescriptor2","_initializerWarningHelper2","_allPromises","_invariant","_rx","_Result","_fp","_subscriptions","_lazy","_subscribeToCount","_subscribeToQuery","_subscribeToQueryWithColumns","Q","_interopRequireWildcard","_helpers","_class","_descriptor","_descriptor2","_descriptor3","_class2","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","Query","collection","clauses","_rawDescription","buildQueryDescription","description","queryWithoutDeleted","_proto","extend","_len","arguments","length","args","Array","_key","fromArrayOrSpread","_this$_rawDescription","where","sortBy","take","skip","joinTables","nestedJoinTables","lokiTransform","sql","experimentalJoinTables","concat","map","_ref","from","to","experimentalNestedJoin","unsafeLokiTransform","pipe","transform","fetch","_this","toPromise","callback","_fetchQuery","then","onFulfill","onReject","observe","_this2","Observable","create","observer","_cachedSubscribable","subscribe","records","next","observeWithColumns","columnNames","_this3","experimentalSubscribeWithColumns","fetchCount","_this4","_fetchCount","observeCount","isThrottled","undefined","_this5","subscribable","_cachedCountThrottledSubscribable","_cachedCountSubscribable","count","fetchIds","_this6","_fetchIds","unsafeFetchRaw","_this7","_unsafeFetchRaw","experimentalSubscribe","subscriber","experimentalSubscribeToCount","markAllAsDeleted","Promise","$return","$error","resolve","$await_1","record","markAsDeleted","$boundEx","bind","destroyAllPermanently","$await_3","destroyPermanently","serialize","table","associations","model","modelClass","_ref2","secondaryTables","getAssociations","db","_wmelonTag","configurable","enumerable","writable","initializer","_this8","SharedSubscribable","_this9","_this10"],"sources":["/app/node_modules/@nozbe/watermelondb/Query/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nexports.__esModule = true;\nexports.default = void 0;\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _initializerDefineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/initializerDefineProperty\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _applyDecoratedDescriptor2 = _interopRequireDefault(require(\"@babel/runtime/helpers/applyDecoratedDescriptor\"));\nvar _initializerWarningHelper2 = _interopRequireDefault(require(\"@babel/runtime/helpers/initializerWarningHelper\"));\nvar _allPromises = _interopRequireDefault(require(\"../utils/fp/allPromises\"));\nvar _invariant = _interopRequireDefault(require(\"../utils/common/invariant\"));\nvar _rx = require(\"../utils/rx\");\nvar _Result = require(\"../utils/fp/Result\");\nvar _fp = require(\"../utils/fp\");\nvar _subscriptions = require(\"../utils/subscriptions\");\nvar _lazy = _interopRequireDefault(require(\"../decorators/lazy\"));\nvar _subscribeToCount = _interopRequireDefault(require(\"../observation/subscribeToCount\"));\nvar _subscribeToQuery = _interopRequireDefault(require(\"../observation/subscribeToQuery\"));\nvar _subscribeToQueryWithColumns = _interopRequireDefault(require(\"../observation/subscribeToQueryWithColumns\"));\nvar Q = _interopRequireWildcard(require(\"../QueryDescription\"));\nvar _helpers = require(\"./helpers\");\nvar _class, _descriptor, _descriptor2, _descriptor3, _class2;\nfunction _getRequireWildcardCache(nodeInterop) { if (\"function\" !== typeof WeakMap) return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (null === obj || \"object\" !== typeof obj && \"function\" !== typeof obj) { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (\"default\" !== key && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nvar Query = (_class = (_class2 = /*#__PURE__*/function () {\n  // Used by withObservables to differentiate between object types\n\n  // Note: Don't use this directly, use Collection.query(...)\n  function Query(collection, clauses) {\n    (0, _initializerDefineProperty2.default)(this, \"_cachedSubscribable\", _descriptor, this);\n    (0, _initializerDefineProperty2.default)(this, \"_cachedCountSubscribable\", _descriptor2, this);\n    (0, _initializerDefineProperty2.default)(this, \"_cachedCountThrottledSubscribable\", _descriptor3, this);\n    this.collection = collection;\n    this._rawDescription = Q.buildQueryDescription(clauses);\n    this.description = Q.queryWithoutDeleted(this._rawDescription);\n  }\n\n  /*:: extend: ArrayOrSpreadFn<Clause, Query<Record>>  */\n  /**\n   * Returns a new Query that contains all clauses (conditions, sorting, etc.) from this Query\n   * as well as the ones passed as arguments.\n   *\n   * You can pass conditions as multiple arguments or a single array.\n   */\n  // $FlowFixMe\n  var _proto = Query.prototype;\n  _proto.extend = function extend(...args) {\n    var clauses = (0, _fp.fromArrayOrSpread)(args, 'Collection.query', 'Clause');\n    var {\n      collection: collection\n    } = this;\n    var {\n      where: where,\n      sortBy: sortBy,\n      take: take,\n      skip: skip,\n      joinTables: joinTables,\n      nestedJoinTables: nestedJoinTables,\n      lokiTransform: lokiTransform,\n      sql: sql\n    } = this._rawDescription;\n    (0, _invariant.default)(!sql, 'Cannot extend an unsafe SQL query');\n\n    // TODO: Move this & tests to QueryDescription\n    return new Query(collection, [Q.experimentalJoinTables(joinTables)].concat((0, _toConsumableArray2.default)(nestedJoinTables.map(function ({\n      from: from,\n      to: to\n    }) {\n      return Q.experimentalNestedJoin(from, to);\n    })), (0, _toConsumableArray2.default)(where), (0, _toConsumableArray2.default)(sortBy), (0, _toConsumableArray2.default)(take ? [Q.take(take)] : []), (0, _toConsumableArray2.default)(skip ? [Q.skip(skip)] : []), (0, _toConsumableArray2.default)(lokiTransform ? [Q.unsafeLokiTransform(lokiTransform)] : []), (0, _toConsumableArray2.default)(clauses)));\n  }\n\n  /**\n   * `query.pipe(fn)` is a FP convenience for `fn(query)`\n   */;\n  _proto.pipe = function pipe(transform) {\n    return transform(this);\n  }\n\n  /**\n   * Fetches the list of records matching this query\n   *\n   * Tip: For convenience, you can also use `await query`\n   */;\n  _proto.fetch = function fetch() {\n    var _this = this;\n    return (0, _Result.toPromise)(function (callback) {\n      return _this.collection._fetchQuery(_this, callback);\n    });\n  };\n  _proto.then = function then(onFulfill, onReject) {\n    // $FlowFixMe\n    return this.fetch().then(onFulfill, onReject);\n  }\n\n  /**\n   * Returns an `Rx.Observable` that tracks the list of records matching this query\n   *\n   * Tip: When using `withObservables`, you can simply pass the query without calling `.observe()`\n   *\n   * Warning: Changes to individual records in the array are NOT observed. Use `observeWithColumns`\n   */;\n  _proto.observe = function observe() {\n    var _this2 = this;\n    return _rx.Observable.create(function (observer) {\n      return _this2._cachedSubscribable.subscribe(function (records) {\n        observer.next(records);\n      });\n    });\n  }\n\n  /**\n   * Same as {@link Query#observe}, but also emits when any of the records on the list\n   * has one of its `columnNames` changed.\n   */;\n  _proto.observeWithColumns = function observeWithColumns(columnNames) {\n    var _this3 = this;\n    return _rx.Observable.create(function (observer) {\n      return _this3.experimentalSubscribeWithColumns(columnNames, function (records) {\n        observer.next(records);\n      });\n    });\n  }\n\n  /**\n   * Fetches the number of records matching this query\n   *\n   * Tip: For convenience you can also use `await query.count`\n   */;\n  _proto.fetchCount = function fetchCount() {\n    var _this4 = this;\n    return (0, _Result.toPromise)(function (callback) {\n      return _this4.collection._fetchCount(_this4, callback);\n    });\n  };\n  /**\n   * Returns an `Rx.Observable` that tracks the number of matching records\n   *\n   * Note: By default, the count is throttled. Pass `false` to opt out of throttling.\n   */\n  _proto.observeCount = function observeCount(isThrottled = true) {\n    var _this5 = this;\n    return _rx.Observable.create(function (observer) {\n      var subscribable = isThrottled ? _this5._cachedCountThrottledSubscribable : _this5._cachedCountSubscribable;\n      return subscribable.subscribe(function (count) {\n        observer.next(count);\n      });\n    });\n  }\n\n  /**\n   * Fetches the list of IDs of records matching this query\n   *\n   * Note: This is faster than using `fetch()` if you only need IDs\n   */;\n  _proto.fetchIds = function fetchIds() {\n    var _this6 = this;\n    return (0, _Result.toPromise)(function (callback) {\n      return _this6.collection._fetchIds(_this6, callback);\n    });\n  }\n\n  /**\n   * Fetches an array of raw results of this query from the database.\n   * These are plain JavaScript types and objects, not `Model` instances\n   *\n   * Warning: You MUST NOT mutate these objects, this can corrupt the database!\n   *\n   * This is useful as a performance optimization or for running non-standard raw queries\n   * (e.g. pragmas, statistics, groupped results, records with extra columns, etc...)\n   */;\n  _proto.unsafeFetchRaw = function unsafeFetchRaw() {\n    var _this7 = this;\n    return (0, _Result.toPromise)(function (callback) {\n      return _this7.collection._unsafeFetchRaw(_this7, callback);\n    });\n  }\n\n  /**\n   * Rx-free equivalent of `.observe()`\n   */;\n  _proto.experimentalSubscribe = function experimentalSubscribe(subscriber) {\n    return this._cachedSubscribable.subscribe(subscriber);\n  }\n\n  /**\n   * Rx-free equivalent of `.observeWithColumns()`\n   */;\n  _proto.experimentalSubscribeWithColumns = function experimentalSubscribeWithColumns(columnNames, subscriber) {\n    return (0, _subscribeToQueryWithColumns.default)(this, columnNames, subscriber);\n  }\n\n  /**\n   * Rx-free equivalent of `.observeCount()`\n   */;\n  _proto.experimentalSubscribeToCount = function experimentalSubscribeToCount(subscriber) {\n    return this._cachedCountSubscribable.subscribe(subscriber);\n  }\n\n  /**\n   * Marks all records matching this query as deleted (they will be deleted permenantly after sync)\n   *\n   * Note: This method must be called within a Writer {@link Database#write}.\n   *\n   * @see {Model#markAsDeleted}\n   */;\n  _proto.markAllAsDeleted = function markAllAsDeleted() {\n    return new Promise(function ($return, $error) {\n      var records;\n      return Promise.resolve(this.fetch()).then(function ($await_1) {\n        try {\n          records = $await_1;\n          return Promise.resolve((0, _allPromises.default)(function (record) {\n            return record.markAsDeleted();\n          }, records)).then(function () {\n            try {\n              return $return();\n            } catch ($boundEx) {\n              return $error($boundEx);\n            }\n          }, $error);\n        } catch ($boundEx) {\n          return $error($boundEx);\n        }\n      }, $error);\n    }.bind(this));\n  }\n\n  /**\n   * Permanently deletes all records matching this query\n   *\n   * Note: Do not use this when using Sync, as deletion will not be synced.\n   *\n   * Note: This method must be called within a Writer {@link Database#write}.\n   *\n   * @see {Model#destroyPermanently}\n   */;\n  _proto.destroyAllPermanently = function destroyAllPermanently() {\n    return new Promise(function ($return, $error) {\n      var records;\n      return Promise.resolve(this.fetch()).then(function ($await_3) {\n        try {\n          records = $await_3;\n          return Promise.resolve((0, _allPromises.default)(function (record) {\n            return record.destroyPermanently();\n          }, records)).then(function () {\n            try {\n              return $return();\n            } catch ($boundEx) {\n              return $error($boundEx);\n            }\n          }, $error);\n        } catch ($boundEx) {\n          return $error($boundEx);\n        }\n      }, $error);\n    }.bind(this));\n  }\n\n  // MARK: - Internals\n\n  /**\n   * `Model` subclass associated with this query\n   */;\n  // Serialized version of Query (e.g. for sending to web worker)\n  _proto.serialize = function serialize() {\n    var {\n      table: table,\n      description: description,\n      associations: associations\n    } = this;\n    return {\n      table: table,\n      description: description,\n      associations: associations\n    };\n  };\n  (0, _createClass2.default)(Query, [{\n    key: \"count\",\n    get: function get() {\n      var model = this;\n      return {\n        then: function then(onFulfill, onReject) {\n          // $FlowFixMe\n          return model.fetchCount().then(onFulfill, onReject);\n        }\n      };\n    }\n  }, {\n    key: \"modelClass\",\n    get: function get() {\n      return this.collection.modelClass;\n    }\n\n    /**\n     * Table name of the Collection associated with this query\n     */\n  }, {\n    key: \"table\",\n    get: function get() {\n      // $FlowFixMe\n      return this.modelClass.table;\n    }\n\n    // TODO: Should any of the below be public API? Is this any useful outside of Watermelon\n    // internals? If so, should it even be here, not `_`-prefixed?\n  }, {\n    key: \"secondaryTables\",\n    get: function get() {\n      return this.description.joinTables.concat(this.description.nestedJoinTables.map(function ({\n        to: to\n      }) {\n        return to;\n      }));\n    }\n  }, {\n    key: \"allTables\",\n    get: function get() {\n      return [this.table].concat(this.secondaryTables);\n    }\n  }, {\n    key: \"associations\",\n    get: function get() {\n      return (0, _helpers.getAssociations)(this.description, this.modelClass, this.collection.db);\n    }\n  }]);\n  return Query;\n}(), _class2._wmelonTag = 'query', _class2), (_descriptor = (0, _applyDecoratedDescriptor2.default)(_class.prototype, \"_cachedSubscribable\", [_lazy.default], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this8 = this;\n    return new _subscriptions.SharedSubscribable(function (subscriber) {\n      return (0, _subscribeToQuery.default)(_this8, subscriber);\n    });\n  }\n}), _descriptor2 = (0, _applyDecoratedDescriptor2.default)(_class.prototype, \"_cachedCountSubscribable\", [_lazy.default], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this9 = this;\n    return new _subscriptions.SharedSubscribable(function (subscriber) {\n      return (0, _subscribeToCount.default)(_this9, false, subscriber);\n    });\n  }\n}), _descriptor3 = (0, _applyDecoratedDescriptor2.default)(_class.prototype, \"_cachedCountThrottledSubscribable\", [_lazy.default], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this10 = this;\n    return new _subscriptions.SharedSubscribable(function (subscriber) {\n      return (0, _subscribeToCount.default)(_this10, true, subscriber);\n    });\n  }\n})), _class);\nexports.default = Query;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}