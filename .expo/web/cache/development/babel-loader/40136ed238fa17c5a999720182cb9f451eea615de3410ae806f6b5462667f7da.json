{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nexports.__esModule = true;\nexports.default = void 0;\nvar _makeDecorator = _interopRequireDefault(require(\"../../utils/common/makeDecorator\"));\nvar _memory = require(\"../../utils/common/memory\");\nvar _common = require(\"../common\");\nvar cache = new Map();\n(0, _memory.onLowMemory)(function () {\n  return cache.clear();\n});\nvar dateDecorator = (0, _makeDecorator.default)(function (columnName) {\n  return function (target, key, descriptor) {\n    (0, _common.ensureDecoratorUsedProperly)(columnName, target, key, descriptor);\n    return {\n      configurable: true,\n      enumerable: true,\n      get: function get() {\n        var rawValue = this.asModel._getRaw(columnName);\n        if ('number' === typeof rawValue) {\n          var cached = cache.get(rawValue);\n          if (cached) {\n            return cached;\n          }\n          var date = new Date(rawValue);\n          cache.set(rawValue, date);\n          return date;\n        }\n        return null;\n      },\n      set: function set(date) {\n        var rawValue = date ? +new Date(date) : null;\n        if (rawValue && date) {\n          cache.set(rawValue, new Date(date));\n        }\n        this.asModel._setRaw(columnName, rawValue);\n      }\n    };\n  };\n});\nvar _default = dateDecorator;\nexports.default = _default;","map":{"version":3,"names":["_interopRequireDefault","require","exports","__esModule","default","_makeDecorator","_memory","_common","cache","Map","onLowMemory","clear","dateDecorator","columnName","target","key","descriptor","ensureDecoratorUsedProperly","configurable","enumerable","get","rawValue","asModel","_getRaw","cached","date","Date","set","_setRaw","_default"],"sources":["/app/node_modules/@nozbe/watermelondb/decorators/date/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nexports.__esModule = true;\nexports.default = void 0;\nvar _makeDecorator = _interopRequireDefault(require(\"../../utils/common/makeDecorator\"));\nvar _memory = require(\"../../utils/common/memory\");\nvar _common = require(\"../common\");\n// Defines a model property representing a date\n//\n// Serializes dates to milisecond-precision Unix timestamps, and deserializes them to Date objects\n// (but passes null values as-is)\n//\n// Pass the database column name as an argument\n//\n// Examples:\n//   @date('reacted_at') reactedAt: Date\nvar cache = new Map();\n(0, _memory.onLowMemory)(function () {\n  return cache.clear();\n});\nvar dateDecorator = (0, _makeDecorator.default)(function (columnName) {\n  return function (target, key, descriptor) {\n    (0, _common.ensureDecoratorUsedProperly)(columnName, target, key, descriptor);\n    return {\n      configurable: true,\n      enumerable: true,\n      get: function get() {\n        // $FlowFixMe\n        var rawValue = this.asModel._getRaw(columnName);\n        if ('number' === typeof rawValue) {\n          var cached = cache.get(rawValue);\n          if (cached) {\n            return cached;\n          }\n          var date = new Date(rawValue);\n          cache.set(rawValue, date);\n          return date;\n        }\n        return null;\n      },\n      set: function set(date) {\n        var rawValue = date ? +new Date(date) : null;\n        if (rawValue && date) {\n          cache.set(rawValue, new Date(date));\n        }\n        // $FlowFixMe\n        this.asModel._setRaw(columnName, rawValue);\n      }\n    };\n  };\n});\nvar _default = dateDecorator;\nexports.default = _default;"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,sBAAsB,GAAGC,OAAO,CAAC,8CAA8C,CAAC;AACpFC,OAAO,CAACC,UAAU,GAAG,IAAI;AACzBD,OAAO,CAACE,OAAO,GAAG,KAAK,CAAC;AACxB,IAAIC,cAAc,GAAGL,sBAAsB,CAACC,OAAO,mCAAmC,CAAC,CAAC;AACxF,IAAIK,OAAO,GAAGL,OAAO,4BAA4B,CAAC;AAClD,IAAIM,OAAO,GAAGN,OAAO,YAAY,CAAC;AAUlC,IAAIO,KAAK,GAAG,IAAIC,GAAG,CAAC,CAAC;AACrB,CAAC,CAAC,EAAEH,OAAO,CAACI,WAAW,EAAE,YAAY;EACnC,OAAOF,KAAK,CAACG,KAAK,CAAC,CAAC;AACtB,CAAC,CAAC;AACF,IAAIC,aAAa,GAAG,CAAC,CAAC,EAAEP,cAAc,CAACD,OAAO,EAAE,UAAUS,UAAU,EAAE;EACpE,OAAO,UAAUC,MAAM,EAAEC,GAAG,EAAEC,UAAU,EAAE;IACxC,CAAC,CAAC,EAAET,OAAO,CAACU,2BAA2B,EAAEJ,UAAU,EAAEC,MAAM,EAAEC,GAAG,EAAEC,UAAU,CAAC;IAC7E,OAAO;MACLE,YAAY,EAAE,IAAI;MAClBC,UAAU,EAAE,IAAI;MAChBC,GAAG,EAAE,SAASA,GAAGA,CAAA,EAAG;QAElB,IAAIC,QAAQ,GAAG,IAAI,CAACC,OAAO,CAACC,OAAO,CAACV,UAAU,CAAC;QAC/C,IAAI,QAAQ,KAAK,OAAOQ,QAAQ,EAAE;UAChC,IAAIG,MAAM,GAAGhB,KAAK,CAACY,GAAG,CAACC,QAAQ,CAAC;UAChC,IAAIG,MAAM,EAAE;YACV,OAAOA,MAAM;UACf;UACA,IAAIC,IAAI,GAAG,IAAIC,IAAI,CAACL,QAAQ,CAAC;UAC7Bb,KAAK,CAACmB,GAAG,CAACN,QAAQ,EAAEI,IAAI,CAAC;UACzB,OAAOA,IAAI;QACb;QACA,OAAO,IAAI;MACb,CAAC;MACDE,GAAG,EAAE,SAASA,GAAGA,CAACF,IAAI,EAAE;QACtB,IAAIJ,QAAQ,GAAGI,IAAI,GAAG,CAAC,IAAIC,IAAI,CAACD,IAAI,CAAC,GAAG,IAAI;QAC5C,IAAIJ,QAAQ,IAAII,IAAI,EAAE;UACpBjB,KAAK,CAACmB,GAAG,CAACN,QAAQ,EAAE,IAAIK,IAAI,CAACD,IAAI,CAAC,CAAC;QACrC;QAEA,IAAI,CAACH,OAAO,CAACM,OAAO,CAACf,UAAU,EAAEQ,QAAQ,CAAC;MAC5C;IACF,CAAC;EACH,CAAC;AACH,CAAC,CAAC;AACF,IAAIQ,QAAQ,GAAGjB,aAAa;AAC5BV,OAAO,CAACE,OAAO,GAAGyB,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}