{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _initializerDefineProperty from \"@babel/runtime/helpers/initializerDefineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _applyDecoratedDescriptor from \"@babel/runtime/helpers/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"@babel/runtime/helpers/initializerWarningHelper\";\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _dec9, _dec0, _class, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6, _descriptor7, _descriptor8, _descriptor9, _descriptor0, _LentItemModel;\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nimport { Model } from '@nozbe/watermelondb';\nimport { field, date, readonly } from '@nozbe/watermelondb/decorators';\nvar LentItemModel = (_dec = field('item_name'), _dec2 = field('borrower_name'), _dec3 = field('borrower_contact'), _dec4 = field('lent_date'), _dec5 = field('expected_return_date'), _dec6 = field('actual_return_date'), _dec7 = field('notes'), _dec8 = field('is_returned'), _dec9 = date('created_at'), _dec0 = date('updated_at'), _class = (_LentItemModel = function (_Model) {\n  function LentItemModel() {\n    var _this;\n    _classCallCheck(this, LentItemModel);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, LentItemModel, [].concat(args));\n    _initializerDefineProperty(_this, \"itemName\", _descriptor, _this);\n    _initializerDefineProperty(_this, \"borrowerName\", _descriptor2, _this);\n    _initializerDefineProperty(_this, \"borrowerContact\", _descriptor3, _this);\n    _initializerDefineProperty(_this, \"lentDate\", _descriptor4, _this);\n    _initializerDefineProperty(_this, \"expectedReturnDate\", _descriptor5, _this);\n    _initializerDefineProperty(_this, \"actualReturnDate\", _descriptor6, _this);\n    _initializerDefineProperty(_this, \"notes\", _descriptor7, _this);\n    _initializerDefineProperty(_this, \"isReturned\", _descriptor8, _this);\n    _initializerDefineProperty(_this, \"createdAt\", _descriptor9, _this);\n    _initializerDefineProperty(_this, \"updatedAt\", _descriptor0, _this);\n    return _this;\n  }\n  _inherits(LentItemModel, _Model);\n  return _createClass(LentItemModel, [{\n    key: \"markAsReturned\",\n    value: function () {\n      var _markAsReturned = _asyncToGenerator(function* () {\n        var returnDate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Date();\n        yield this.update(function (item) {\n          item.isReturned = true;\n          item.actualReturnDate = returnDate.getTime();\n        });\n      });\n      function markAsReturned() {\n        return _markAsReturned.apply(this, arguments);\n      }\n      return markAsReturned;\n    }()\n  }, {\n    key: \"isOverdue\",\n    value: function isOverdue() {\n      if (this.isReturned) return false;\n      return Date.now() > this.expectedReturnDate;\n    }\n  }, {\n    key: \"isDueSoon\",\n    value: function isDueSoon() {\n      var daysThreshold = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 3;\n      if (this.isReturned) return false;\n      var now = Date.now();\n      var timeDiff = this.expectedReturnDate - now;\n      var daysDiff = timeDiff / (1000 * 3600 * 24);\n      return daysDiff <= daysThreshold && daysDiff >= 0;\n    }\n  }, {\n    key: \"getStatus\",\n    value: function getStatus() {\n      if (this.isReturned) return 'returned';\n      if (this.isOverdue()) return 'overdue';\n      if (this.isDueSoon()) return 'due_soon';\n      return 'active';\n    }\n  }]);\n}(Model), _LentItemModel.table = 'lent_items', _LentItemModel), _descriptor = _applyDecoratedDescriptor(_class.prototype, \"itemName\", [_dec], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"borrowerName\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor3 = _applyDecoratedDescriptor(_class.prototype, \"borrowerContact\", [_dec3], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor4 = _applyDecoratedDescriptor(_class.prototype, \"lentDate\", [_dec4], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor5 = _applyDecoratedDescriptor(_class.prototype, \"expectedReturnDate\", [_dec5], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor6 = _applyDecoratedDescriptor(_class.prototype, \"actualReturnDate\", [_dec6], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor7 = _applyDecoratedDescriptor(_class.prototype, \"notes\", [_dec7], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor8 = _applyDecoratedDescriptor(_class.prototype, \"isReturned\", [_dec8], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor9 = _applyDecoratedDescriptor(_class.prototype, \"createdAt\", [readonly, _dec9], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor0 = _applyDecoratedDescriptor(_class.prototype, \"updatedAt\", [readonly, _dec0], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _class);\nexport { LentItemModel as default };","map":{"version":3,"names":["Model","field","date","readonly","LentItemModel","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec0","_class","_LentItemModel","_Model","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_callSuper","concat","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor0","_inherits","_createClass","key","value","_markAsReturned","_asyncToGenerator","returnDate","undefined","Date","update","item","isReturned","actualReturnDate","getTime","markAsReturned","apply","isOverdue","now","expectedReturnDate","isDueSoon","daysThreshold","timeDiff","daysDiff","getStatus","table","_applyDecoratedDescriptor","prototype","configurable","enumerable","writable","initializer","default"],"sources":["/app/src/data/models/LentItemModel.ts"],"sourcesContent":["import { Model } from '@nozbe/watermelondb';\nimport { field, date, readonly } from '@nozbe/watermelondb/decorators';\n\nexport default class LentItemModel extends Model {\n  static table = 'lent_items';\n\n  @field('item_name') itemName!: string;\n  @field('borrower_name') borrowerName!: string;\n  @field('borrower_contact') borrowerContact?: string;\n  @field('lent_date') lentDate!: number;\n  @field('expected_return_date') expectedReturnDate!: number;\n  @field('actual_return_date') actualReturnDate?: number;\n  @field('notes') notes?: string;\n  @field('is_returned') isReturned!: boolean;\n  @readonly @date('created_at') createdAt!: number;\n  @readonly @date('updated_at') updatedAt!: number;\n\n  async markAsReturned(returnDate: Date = new Date()) {\n    await this.update((item) => {\n      item.isReturned = true;\n      item.actualReturnDate = returnDate.getTime();\n    });\n  }\n\n  isOverdue(): boolean {\n    if (this.isReturned) return false;\n    return Date.now() > this.expectedReturnDate;\n  }\n\n  isDueSoon(daysThreshold: number = 3): boolean {\n    if (this.isReturned) return false;\n    const now = Date.now();\n    const timeDiff = this.expectedReturnDate - now;\n    const daysDiff = timeDiff / (1000 * 3600 * 24);\n    return daysDiff <= daysThreshold && daysDiff >= 0;\n  }\n\n  getStatus(): 'returned' | 'overdue' | 'due_soon' | 'active' {\n    if (this.isReturned) return 'returned';\n    if (this.isOverdue()) return 'overdue';\n    if (this.isDueSoon()) return 'due_soon';\n    return 'active';\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}