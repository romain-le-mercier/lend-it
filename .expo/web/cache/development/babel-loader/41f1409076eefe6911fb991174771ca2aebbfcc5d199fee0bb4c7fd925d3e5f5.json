{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"@babel/runtime/helpers/slicedToArray\");\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nexports.__esModule = true;\nexports.default = void 0;\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\nvar _common = require(\"../utils/common\");\nvar ReaderInterfaceImpl = function () {\n  function ReaderInterfaceImpl(queue, item) {\n    this.__workQueue = queue;\n    this.__workItem = item;\n  }\n  var _proto = ReaderInterfaceImpl.prototype;\n  _proto.__validateQueue = function __validateQueue() {\n    (0, _common.invariant)(this.__workQueue._queue[0] === this.__workItem, 'Illegal call on a reader/writer that should no longer be running');\n  };\n  _proto.callReader = function callReader(reader) {\n    this.__validateQueue();\n    return this.__workQueue.subAction(reader);\n  };\n  return ReaderInterfaceImpl;\n}();\nvar WriterInterfaceImpl = function (_ReaderInterfaceImpl) {\n  (0, _inheritsLoose2.default)(WriterInterfaceImpl, _ReaderInterfaceImpl);\n  function WriterInterfaceImpl() {\n    return _ReaderInterfaceImpl.apply(this, arguments) || this;\n  }\n  var _proto2 = WriterInterfaceImpl.prototype;\n  _proto2.callWriter = function callWriter(writer) {\n    this.__validateQueue();\n    return this.__workQueue.subAction(writer);\n  };\n  _proto2.batch = function batch() {\n    this.__validateQueue();\n    for (var _len = arguments.length, records = new Array(_len), _key = 0; _key < _len; _key++) {\n      records[_key] = arguments[_key];\n    }\n    return this.__workQueue._db.batch(records);\n  };\n  return WriterInterfaceImpl;\n}(ReaderInterfaceImpl);\nvar actionInterface = function actionInterface(queue, item) {\n  return item.isWriter ? new WriterInterfaceImpl(queue, item) : new ReaderInterfaceImpl(queue, item);\n};\nvar WorkQueue = function () {\n  function WorkQueue(db) {\n    this._queue = [];\n    this._subActionIncoming = false;\n    this._db = db;\n  }\n  var _proto3 = WorkQueue.prototype;\n  _proto3.enqueue = function enqueue(work, description, isWriter) {\n    var _this = this;\n    if (this._subActionIncoming) {\n      this._subActionIncoming = false;\n      var currentWork = this._queue[0];\n      if (!currentWork.isWriter) {\n        (0, _common.invariant)(!isWriter, 'Cannot call a writer block from a reader block');\n      }\n      return work(actionInterface(this, currentWork));\n    }\n    return new Promise(function (resolve, reject) {\n      var workItem = {\n        work: work,\n        isWriter: isWriter,\n        resolve: resolve,\n        reject: reject,\n        description: description\n      };\n      if ('production' !== process.env.NODE_ENV && _this._queue.length) {\n        setTimeout(function () {\n          var queue = _this._queue;\n          var current = queue[0];\n          if (current === workItem || !queue.includes(workItem)) {\n            return;\n          }\n          var enqueuedKind = isWriter ? 'writer' : 'reader';\n          var currentKind = current.isWriter ? 'writer' : 'reader';\n          _common.logger.warn(\"The \".concat(enqueuedKind, \" you're trying to run (\").concat(description || 'unnamed', \") can't be performed yet, because there are \").concat(queue.length, \" other readers/writers in the queue.\\n\\nCurrent \").concat(currentKind, \": \").concat(current.description || 'unnamed', \".\\n\\nIf everything is working fine, you can safely ignore this message (queueing is working as expected). But if your readers/writers are not running, it's because the current \").concat(currentKind, \" is stuck.\\nRemember that if you're calling a reader/writer from another reader/writer, you must use callReader()/callWriter(). See docs for more details.\"));\n          _common.logger.log(\"Enqueued \".concat(enqueuedKind, \":\"), work);\n          _common.logger.log(\"Running \".concat(currentKind, \":\"), current.work);\n        }, 1500);\n      }\n      _this._queue.push(workItem);\n      if (1 === _this._queue.length) {\n        _this._executeNext();\n      }\n    });\n  };\n  _proto3.subAction = function subAction(work) {\n    try {\n      this._subActionIncoming = true;\n      var promise = work();\n      (0, _common.invariant)(!this._subActionIncoming, 'callReader/callWriter call must call a reader/writer synchronously');\n      return promise;\n    } catch (error) {\n      this._subActionIncoming = false;\n      return Promise.reject(error);\n    }\n  };\n  _proto3._executeNext = function _executeNext() {\n    return new Promise(function ($return, $error) {\n      var _this2, workItem, work, resolve, reject, isWriter, workPromise;\n      _this2 = this;\n      workItem = this._queue[0];\n      var _workItem = workItem;\n      work = _workItem.work;\n      resolve = _workItem.resolve;\n      reject = _workItem.reject;\n      isWriter = _workItem.isWriter;\n      var $Try_2_Post = function () {\n        try {\n          this._queue.shift();\n          if (this._queue.length) {\n            setTimeout(function () {\n              return _this2._executeNext();\n            }, 0);\n          }\n          return $return();\n        } catch ($boundEx) {\n          return $error($boundEx);\n        }\n      }.bind(this);\n      var $Try_2_Catch = function $Try_2_Catch(error) {\n        try {\n          reject(error);\n          return $Try_2_Post();\n        } catch ($boundEx) {\n          return $error($boundEx);\n        }\n      };\n      try {\n        workPromise = work(actionInterface(this, workItem));\n        if ('production' !== process.env.NODE_ENV) {\n          (0, _common.invariant)(workPromise instanceof Promise, \"The function passed to database.\".concat(isWriter ? 'write' : 'read', \"() or a method marked as @\").concat(isWriter ? 'writer' : 'reader', \" must be asynchronous (marked as 'async' or always returning a promise) (in: \").concat(workItem.description || 'unnamed', \")\"));\n        }\n        return Promise.resolve(workPromise).then(function ($await_3) {\n          try {\n            resolve($await_3);\n            return $Try_2_Post();\n          } catch ($boundEx) {\n            return $Try_2_Catch($boundEx);\n          }\n        }, $Try_2_Catch);\n      } catch (error) {\n        $Try_2_Catch(error);\n      }\n    }.bind(this));\n  };\n  _proto3._abortPendingWork = function _abortPendingWork() {\n    (0, _common.invariant)(1 <= this._queue.length, '_abortPendingWork can only be called from a reader/writer');\n    var workToAbort = this._queue.splice(1);\n    workToAbort.forEach(function (_ref) {\n      var reject = _ref.reject;\n      reject(new Error('Reader/writer has been aborted because the database was reset'));\n    });\n  };\n  (0, _createClass2.default)(WorkQueue, [{\n    key: \"isWriterRunning\",\n    get: function get() {\n      var _this$_queue = _slicedToArray(this._queue, 1),\n        item = _this$_queue[0];\n      return Boolean(item && item.isWriter);\n    }\n  }]);\n  return WorkQueue;\n}();\nexports.default = WorkQueue;","map":{"version":3,"names":["_slicedToArray","require","_interopRequireDefault","exports","__esModule","default","_createClass2","_inheritsLoose2","_common","ReaderInterfaceImpl","queue","item","__workQueue","__workItem","_proto","prototype","__validateQueue","invariant","_queue","callReader","reader","subAction","WriterInterfaceImpl","_ReaderInterfaceImpl","apply","arguments","_proto2","callWriter","writer","batch","_len","length","records","Array","_key","_db","actionInterface","isWriter","WorkQueue","db","_subActionIncoming","_proto3","enqueue","work","description","_this","currentWork","Promise","resolve","reject","workItem","process","env","NODE_ENV","setTimeout","current","includes","enqueuedKind","currentKind","logger","warn","concat","log","push","_executeNext","promise","error","$return","$error","_this2","workPromise","_workItem","$Try_2_Post","shift","$boundEx","bind","$Try_2_Catch","then","$await_3","_abortPendingWork","workToAbort","splice","forEach","_ref","Error","key","get","_this$_queue","Boolean"],"sources":["/app/node_modules/@nozbe/watermelondb/Database/WorkQueue.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nexports.__esModule = true;\nexports.default = void 0;\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\nvar _common = require(\"../utils/common\");\n/* eslint-disable no-use-before-define */\nvar ReaderInterfaceImpl = /*#__PURE__*/function () {\n  function ReaderInterfaceImpl(queue, item) {\n    this.__workQueue = queue;\n    this.__workItem = item;\n  }\n  var _proto = ReaderInterfaceImpl.prototype;\n  _proto.__validateQueue = function __validateQueue() {\n    (0, _common.invariant)(this.__workQueue._queue[0] === this.__workItem, 'Illegal call on a reader/writer that should no longer be running');\n  };\n  _proto.callReader = function callReader(reader) {\n    this.__validateQueue();\n    return this.__workQueue.subAction(reader);\n  };\n  return ReaderInterfaceImpl;\n}();\nvar WriterInterfaceImpl = /*#__PURE__*/function (_ReaderInterfaceImpl) {\n  (0, _inheritsLoose2.default)(WriterInterfaceImpl, _ReaderInterfaceImpl);\n  function WriterInterfaceImpl() {\n    return _ReaderInterfaceImpl.apply(this, arguments) || this;\n  }\n  var _proto2 = WriterInterfaceImpl.prototype;\n  _proto2.callWriter = function callWriter(writer) {\n    this.__validateQueue();\n    return this.__workQueue.subAction(writer);\n  };\n  _proto2.batch = function batch(...records) {\n    this.__validateQueue();\n    return this.__workQueue._db.batch(records);\n  };\n  return WriterInterfaceImpl;\n}(ReaderInterfaceImpl);\nvar actionInterface = function (queue, item) {\n  return item.isWriter ? new WriterInterfaceImpl(queue, item) : new ReaderInterfaceImpl(queue, item);\n};\nvar WorkQueue = /*#__PURE__*/function () {\n  function WorkQueue(db) {\n    this._queue = [];\n    this._subActionIncoming = false;\n    this._db = db;\n  }\n  var _proto3 = WorkQueue.prototype;\n  _proto3.enqueue = function enqueue(work, description, isWriter) {\n    var _this = this;\n    // If a subAction was scheduled using subAction(), database.write/read() calls skip the line\n    if (this._subActionIncoming) {\n      this._subActionIncoming = false;\n      var currentWork = this._queue[0];\n      if (!currentWork.isWriter) {\n        (0, _common.invariant)(!isWriter, 'Cannot call a writer block from a reader block');\n      }\n      return work(actionInterface(this, currentWork));\n    }\n    return new Promise(function (resolve, reject) {\n      var workItem = {\n        work: work,\n        isWriter: isWriter,\n        resolve: resolve,\n        reject: reject,\n        description: description\n      };\n      if ('production' !== process.env.NODE_ENV && _this._queue.length) {\n        setTimeout(function () {\n          var queue = _this._queue;\n          var current = queue[0];\n          if (current === workItem || !queue.includes(workItem)) {\n            return;\n          }\n          var enqueuedKind = isWriter ? 'writer' : 'reader';\n          var currentKind = current.isWriter ? 'writer' : 'reader';\n          _common.logger.warn(\"The \".concat(enqueuedKind, \" you're trying to run (\").concat(description || 'unnamed', \") can't be performed yet, because there are \").concat(queue.length, \" other readers/writers in the queue.\\n\\nCurrent \").concat(currentKind, \": \").concat(current.description || 'unnamed', \".\\n\\nIf everything is working fine, you can safely ignore this message (queueing is working as expected). But if your readers/writers are not running, it's because the current \").concat(currentKind, \" is stuck.\\nRemember that if you're calling a reader/writer from another reader/writer, you must use callReader()/callWriter(). See docs for more details.\"));\n          _common.logger.log(\"Enqueued \".concat(enqueuedKind, \":\"), work);\n          _common.logger.log(\"Running \".concat(currentKind, \":\"), current.work);\n        }, 1500);\n      }\n      _this._queue.push(workItem);\n      if (1 === _this._queue.length) {\n        _this._executeNext();\n      }\n    });\n  };\n  _proto3.subAction = function subAction(work) {\n    try {\n      this._subActionIncoming = true;\n      var promise = work();\n      (0, _common.invariant)(!this._subActionIncoming, 'callReader/callWriter call must call a reader/writer synchronously');\n      return promise;\n    } catch (error) {\n      this._subActionIncoming = false;\n      return Promise.reject(error);\n    }\n  };\n  _proto3._executeNext = function _executeNext() {\n    return new Promise(function ($return, $error) {\n      var _this2, workItem, work, resolve, reject, isWriter, workPromise;\n      _this2 = this;\n      workItem = this._queue[0];\n      ({\n        work: work,\n        resolve: resolve,\n        reject: reject,\n        isWriter: isWriter\n      } = workItem);\n      var $Try_2_Post = function () {\n        try {\n          this._queue.shift();\n          if (this._queue.length) {\n            setTimeout(function () {\n              return _this2._executeNext();\n            }, 0);\n          }\n          return $return();\n        } catch ($boundEx) {\n          return $error($boundEx);\n        }\n      }.bind(this);\n      var $Try_2_Catch = function (error) {\n        try {\n          reject(error);\n          return $Try_2_Post();\n        } catch ($boundEx) {\n          return $error($boundEx);\n        }\n      };\n      try {\n        workPromise = work(actionInterface(this, workItem));\n        if ('production' !== process.env.NODE_ENV) {\n          (0, _common.invariant)(workPromise instanceof Promise, \"The function passed to database.\".concat(isWriter ? 'write' : 'read', \"() or a method marked as @\").concat(isWriter ? 'writer' : 'reader', \" must be asynchronous (marked as 'async' or always returning a promise) (in: \").concat(workItem.description || 'unnamed', \")\"));\n        }\n        return Promise.resolve(workPromise).then(function ($await_3) {\n          try {\n            resolve($await_3);\n            return $Try_2_Post();\n          } catch ($boundEx) {\n            return $Try_2_Catch($boundEx);\n          }\n        }, $Try_2_Catch);\n      } catch (error) {\n        $Try_2_Catch(error)\n      }\n    }.bind(this));\n  };\n  _proto3._abortPendingWork = function _abortPendingWork() {\n    (0, _common.invariant)(1 <= this._queue.length, '_abortPendingWork can only be called from a reader/writer');\n    var workToAbort = this._queue.splice(1); // leave only the caller on the queue\n    workToAbort.forEach(function ({\n      reject: reject\n    }) {\n      reject(new Error('Reader/writer has been aborted because the database was reset'));\n    });\n  };\n  (0, _createClass2.default)(WorkQueue, [{\n    key: \"isWriterRunning\",\n    get: function get() {\n      var [item] = this._queue;\n      return Boolean(item && item.isWriter);\n    }\n  }]);\n  return WorkQueue;\n}();\nexports.default = WorkQueue;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}