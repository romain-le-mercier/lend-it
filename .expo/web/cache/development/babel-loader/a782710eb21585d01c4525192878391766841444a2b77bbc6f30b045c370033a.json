{"ast":null,"code":"import { Database } from '@nozbe/watermelondb';\nimport { schema } from \"../../data/models/schema\";\nimport models from \"../../data/models\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nvar adapter;\nif (Platform.OS === 'web') {\n  var LokiJSAdapter = require('@nozbe/watermelondb/adapters/lokijs').default;\n  adapter = new LokiJSAdapter({\n    dbName: 'lending_tracker',\n    schema: schema,\n    useWebWorker: false,\n    useIncrementalIndexedDB: true\n  });\n} else {\n  var SQLiteAdapter = require('@nozbe/watermelondb/adapters/sqlite').default;\n  adapter = new SQLiteAdapter({\n    dbName: 'lending_tracker',\n    schema: schema,\n    jsi: Platform.OS === 'ios',\n    onSetUpError: function onSetUpError(error) {\n      console.error('Database setup error:', error);\n    }\n  });\n}\nexport var database = new Database({\n  adapter: adapter,\n  modelClasses: models\n});","map":{"version":3,"names":["Database","schema","models","Platform","adapter","OS","LokiJSAdapter","require","default","dbName","useWebWorker","useIncrementalIndexedDB","SQLiteAdapter","jsi","onSetUpError","error","console","database","modelClasses"],"sources":["/app/src/infrastructure/database/database.ts"],"sourcesContent":["import { Database } from '@nozbe/watermelondb';\nimport { schema } from '@/data/models/schema';\nimport models from '@/data/models';\nimport { Platform } from 'react-native';\n\nlet adapter;\n\nif (Platform.OS === 'web') {\n  // Use LokiJS adapter for web\n  const LokiJSAdapter = require('@nozbe/watermelondb/adapters/lokijs').default;\n  adapter = new LokiJSAdapter({\n    dbName: 'lending_tracker',\n    schema,\n    useWebWorker: false,\n    useIncrementalIndexedDB: true,\n  });\n} else {\n  // Use SQLite adapter for mobile\n  const SQLiteAdapter = require('@nozbe/watermelondb/adapters/sqlite').default;\n  adapter = new SQLiteAdapter({\n    dbName: 'lending_tracker',\n    schema,\n    jsi: Platform.OS === 'ios',\n    onSetUpError: (error) => {\n      console.error('Database setup error:', error);\n    },\n  });\n}\n\nexport const database = new Database({\n  adapter,\n  modelClasses: models,\n});"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,qBAAqB;AAC9C,SAASC,MAAM;AACf,OAAOC,MAAM;AAAsB,OAAAC,QAAA;AAGnC,IAAIC,OAAO;AAEX,IAAID,QAAQ,CAACE,EAAE,KAAK,KAAK,EAAE;EAEzB,IAAMC,aAAa,GAAGC,OAAO,CAAC,qCAAqC,CAAC,CAACC,OAAO;EAC5EJ,OAAO,GAAG,IAAIE,aAAa,CAAC;IAC1BG,MAAM,EAAE,iBAAiB;IACzBR,MAAM,EAANA,MAAM;IACNS,YAAY,EAAE,KAAK;IACnBC,uBAAuB,EAAE;EAC3B,CAAC,CAAC;AACJ,CAAC,MAAM;EAEL,IAAMC,aAAa,GAAGL,OAAO,CAAC,qCAAqC,CAAC,CAACC,OAAO;EAC5EJ,OAAO,GAAG,IAAIQ,aAAa,CAAC;IAC1BH,MAAM,EAAE,iBAAiB;IACzBR,MAAM,EAANA,MAAM;IACNY,GAAG,EAAEV,QAAQ,CAACE,EAAE,KAAK,KAAK;IAC1BS,YAAY,EAAE,SAAdA,YAAYA,CAAGC,KAAK,EAAK;MACvBC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;IAC/C;EACF,CAAC,CAAC;AACJ;AAEA,OAAO,IAAME,QAAQ,GAAG,IAAIjB,QAAQ,CAAC;EACnCI,OAAO,EAAPA,OAAO;EACPc,YAAY,EAAEhB;AAChB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}