{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.createObservable = void 0;\nvar _rx = require(\"../utils/rx\");\nvar getImmutableObservable = function getImmutableObservable(relation) {\n  return relation._model.collections.get(relation._relationTableName).findAndObserve(relation.id);\n};\nvar getObservable = function getObservable(relation) {\n  return relation._model.observe().pipe((0, _rx.map)(function (model) {\n    return model._getRaw(relation._columnName);\n  }), (0, _rx.distinctUntilChanged)(), (0, _rx.switchMap)(function (id) {\n    return id ? relation._model.collections.get(relation._relationTableName).findAndObserve(id) : (0, _rx.of)(null);\n  }));\n};\nvar createObservable = function createObservable(relation) {\n  return relation._isImmutable ? getImmutableObservable(relation) : getObservable(relation);\n};\nexports.createObservable = createObservable;","map":{"version":3,"names":["exports","__esModule","createObservable","_rx","require","getImmutableObservable","relation","_model","collections","get","_relationTableName","findAndObserve","id","getObservable","observe","pipe","map","model","_getRaw","_columnName","distinctUntilChanged","switchMap","of","_isImmutable"],"sources":["/app/node_modules/@nozbe/watermelondb/Relation/helpers.js"],"sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.createObservable = void 0;\nvar _rx = require(\"../utils/rx\");\nvar getImmutableObservable = function (relation) {\n  return relation._model.collections.get(relation._relationTableName)\n  // $FlowFixMe\n  .findAndObserve(relation.id);\n};\nvar getObservable = function (relation) {\n  return relation._model.observe()\n  // $FlowFixMe\n  .pipe((0, _rx.map)(function (model) {\n    return model._getRaw(relation._columnName);\n  }), (0, _rx.distinctUntilChanged)(), (0, _rx.switchMap)(function (id) {\n    return id ? relation._model.collections.get(relation._relationTableName).findAndObserve(id) : (0, _rx.of)(null);\n  }));\n};\n\n// eslint-disable-next-line\nvar createObservable = function (relation) {\n  return relation._isImmutable ? getImmutableObservable(relation) : getObservable(relation);\n};\nexports.createObservable = createObservable;"],"mappings":"AAAA,YAAY;;AAEZA,OAAO,CAACC,UAAU,GAAG,IAAI;AACzBD,OAAO,CAACE,gBAAgB,GAAG,KAAK,CAAC;AACjC,IAAIC,GAAG,GAAGC,OAAO,cAAc,CAAC;AAChC,IAAIC,sBAAsB,GAAG,SAAzBA,sBAAsBA,CAAaC,QAAQ,EAAE;EAC/C,OAAOA,QAAQ,CAACC,MAAM,CAACC,WAAW,CAACC,GAAG,CAACH,QAAQ,CAACI,kBAAkB,CAAC,CAElEC,cAAc,CAACL,QAAQ,CAACM,EAAE,CAAC;AAC9B,CAAC;AACD,IAAIC,aAAa,GAAG,SAAhBA,aAAaA,CAAaP,QAAQ,EAAE;EACtC,OAAOA,QAAQ,CAACC,MAAM,CAACO,OAAO,CAAC,CAAC,CAE/BC,IAAI,CAAC,CAAC,CAAC,EAAEZ,GAAG,CAACa,GAAG,EAAE,UAAUC,KAAK,EAAE;IAClC,OAAOA,KAAK,CAACC,OAAO,CAACZ,QAAQ,CAACa,WAAW,CAAC;EAC5C,CAAC,CAAC,EAAE,CAAC,CAAC,EAAEhB,GAAG,CAACiB,oBAAoB,EAAE,CAAC,EAAE,CAAC,CAAC,EAAEjB,GAAG,CAACkB,SAAS,EAAE,UAAUT,EAAE,EAAE;IACpE,OAAOA,EAAE,GAAGN,QAAQ,CAACC,MAAM,CAACC,WAAW,CAACC,GAAG,CAACH,QAAQ,CAACI,kBAAkB,CAAC,CAACC,cAAc,CAACC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAET,GAAG,CAACmB,EAAE,EAAE,IAAI,CAAC;EACjH,CAAC,CAAC,CAAC;AACL,CAAC;AAGD,IAAIpB,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAaI,QAAQ,EAAE;EACzC,OAAOA,QAAQ,CAACiB,YAAY,GAAGlB,sBAAsB,CAACC,QAAQ,CAAC,GAAGO,aAAa,CAACP,QAAQ,CAAC;AAC3F,CAAC;AACDN,OAAO,CAACE,gBAAgB,GAAGA,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}