{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nexports.__esModule = true;\nexports.default = void 0;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar _fp = require(\"../../utils/fp\");\nvar _rx = require(\"../../utils/rx\");\nvar failsafe = function failsafe() {\n  var fallback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n  return function (target, key, descriptor) {\n    return (0, _extends2.default)({}, descriptor, {\n      get: function get() {\n        var value;\n        var unsafeThis = this;\n        if ('value' in descriptor) {\n          value = descriptor.value;\n        } else if ('get' in descriptor) {\n          value = descriptor.get.call(unsafeThis);\n        } else if ('initializer' in descriptor) {\n          value = descriptor.initializer.call(unsafeThis);\n        }\n        if (value && (0, _fp.isObj)(value)) {\n          var originalFetch = value.fetch;\n          var originalObserve = value.observe;\n          if ('function' === typeof originalFetch) {\n            value.fetch = function () {\n              for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                args[_key] = arguments[_key];\n              }\n              var result = originalFetch.apply(value, args);\n              if ((0, _fp.isObj)(result) && 'function' === typeof result.catch) {\n                return result.catch(function () {\n                  return fallback;\n                });\n              }\n              return result;\n            };\n          }\n          if ('function' === typeof originalObserve) {\n            value.observe = function () {\n              for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                args[_key2] = arguments[_key2];\n              }\n              var result = originalObserve.apply(value, args);\n              if ((0, _fp.isObj)(result) && 'function' === typeof result.pipe) {\n                return result.pipe((0, _rx.catchError)(function () {\n                  return (0, _rx.of)(fallback);\n                }));\n              }\n              return result;\n            };\n          }\n        }\n        Object.defineProperty(unsafeThis, key, {\n          value: value,\n          enumerable: descriptor.enumerable\n        });\n        return value;\n      }\n    });\n  };\n};\nvar _default = failsafe;\nexports.default = _default;","map":{"version":3,"names":["_interopRequireDefault","require","exports","__esModule","default","_extends2","_fp","_rx","failsafe","fallback","arguments","length","undefined","target","key","descriptor","get","value","unsafeThis","call","initializer","isObj","originalFetch","fetch","originalObserve","observe","_len","args","Array","_key","result","apply","catch","_len2","_key2","pipe","catchError","of","Object","defineProperty","enumerable","_default"],"sources":["/app/node_modules/@nozbe/watermelondb/decorators/experimentalFailsafe/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nexports.__esModule = true;\nexports.default = void 0;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar _fp = require(\"../../utils/fp\");\nvar _rx = require(\"../../utils/rx\");\nvar failsafe = function (fallback = undefined) {\n  return function (target, key, descriptor) {\n    return (0, _extends2.default)({}, descriptor, {\n      get: function get() {\n        var value;\n        // $FlowFixMe[object-this-reference]\n        var unsafeThis = this;\n        if ('value' in descriptor) {\n          value = descriptor.value;\n        } else if ('get' in descriptor) {\n          value = descriptor.get.call(unsafeThis);\n        } else if ('initializer' in descriptor) {\n          value = descriptor.initializer.call(unsafeThis);\n        }\n        if (value && (0, _fp.isObj)(value)) {\n          var originalFetch = value.fetch;\n          var originalObserve = value.observe;\n          if ('function' === typeof originalFetch) {\n            value.fetch = function (...args) {\n              var result = originalFetch.apply(value, args);\n              if ((0, _fp.isObj)(result) && 'function' === typeof result.catch) {\n                return result.catch(function () {\n                  return fallback;\n                });\n              }\n              return result;\n            };\n          }\n          if ('function' === typeof originalObserve) {\n            value.observe = function (...args) {\n              var result = originalObserve.apply(value, args);\n              if ((0, _fp.isObj)(result) && 'function' === typeof result.pipe) {\n                return result.pipe((0, _rx.catchError)(function () {\n                  return (0, _rx.of)(fallback);\n                }));\n              }\n              return result;\n            };\n          }\n        }\n        Object.defineProperty(unsafeThis, key, {\n          value: value,\n          enumerable: descriptor.enumerable\n        });\n        return value;\n      }\n    });\n  };\n};\nvar _default = failsafe;\nexports.default = _default;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}