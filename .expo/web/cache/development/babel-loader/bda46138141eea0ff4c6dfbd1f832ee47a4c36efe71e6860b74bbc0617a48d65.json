{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nexports.__esModule = true;\nexports.default = void 0;\nvar _common = require(\"../common\");\nvar _Relation = _interopRequireDefault(require(\"../../Relation\"));\nvar relation = function relation(relationTable, relationIdColumn, options) {\n  return function (target, key, descriptor) {\n    (0, _common.ensureDecoratorUsedProperly)(relationIdColumn, target, key, descriptor);\n    return {\n      get: function get() {\n        var model = this;\n        model._relationCache = model._relationCache || {};\n        var cachedRelation = model._relationCache[key];\n        if (cachedRelation) {\n          return cachedRelation;\n        }\n        var newRelation = new _Relation.default(model.asModel, relationTable, relationIdColumn, options || {\n          isImmutable: false\n        });\n        model._relationCache[key] = newRelation;\n        return newRelation;\n      },\n      set: function set() {\n        throw new Error(\"Don't set relation directly. Use relation.set() instead\");\n      }\n    };\n  };\n};\nvar _default = relation;\nexports.default = _default;","map":{"version":3,"names":["_interopRequireDefault","require","exports","__esModule","default","_common","_Relation","relation","relationTable","relationIdColumn","options","target","key","descriptor","ensureDecoratorUsedProperly","get","model","_relationCache","cachedRelation","newRelation","asModel","isImmutable","set","Error","_default"],"sources":["/app/node_modules/@nozbe/watermelondb/decorators/relation/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nexports.__esModule = true;\nexports.default = void 0;\nvar _common = require(\"../common\");\nvar _Relation = _interopRequireDefault(require(\"../../Relation\"));\n// Defines a model property that fetches a record with a specific ID\n// Returns an mutable Relation object\n// - when the fetched record changes\n// - when the record ID changes (new record must be fetched)\n// - â€¦ or emits null whenever record ID is null\n//\n// If the record ID *can't* change, use `immutableRelation` for efficiency\n//\n// Property's setter assigns a new record (you pass the record, and the ID is set)\n//\n// relationIdColumn - name of the column with record ID\n// relationTable - name of the table containing desired recods\n//\n// Example: a Task has a project it belongs to (and the project can change), so it may define:\n//   @relation('project', 'project_id') project: Relation<Project>\nvar relation = function (relationTable, relationIdColumn, options) {\n  return function (target, key, descriptor) {\n    (0, _common.ensureDecoratorUsedProperly)(relationIdColumn, target, key, descriptor);\n    return {\n      get: function get() {\n        // $FlowFixMe\n        var model = this;\n        model._relationCache = model._relationCache || {};\n        var cachedRelation = model._relationCache[key];\n        if (cachedRelation) {\n          return cachedRelation;\n        }\n        var newRelation = new _Relation.default(model.asModel, relationTable, relationIdColumn, options || {\n          isImmutable: false\n        });\n        model._relationCache[key] = newRelation;\n        return newRelation;\n      },\n      set: function set() {\n        throw new Error(\"Don't set relation directly. Use relation.set() instead\");\n      }\n    };\n  };\n};\nvar _default = relation;\nexports.default = _default;"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,sBAAsB,GAAGC,OAAO,CAAC,8CAA8C,CAAC;AACpFC,OAAO,CAACC,UAAU,GAAG,IAAI;AACzBD,OAAO,CAACE,OAAO,GAAG,KAAK,CAAC;AACxB,IAAIC,OAAO,GAAGJ,OAAO,YAAY,CAAC;AAClC,IAAIK,SAAS,GAAGN,sBAAsB,CAACC,OAAO,iBAAiB,CAAC,CAAC;AAgBjE,IAAIM,QAAQ,GAAG,SAAXA,QAAQA,CAAaC,aAAa,EAAEC,gBAAgB,EAAEC,OAAO,EAAE;EACjE,OAAO,UAAUC,MAAM,EAAEC,GAAG,EAAEC,UAAU,EAAE;IACxC,CAAC,CAAC,EAAER,OAAO,CAACS,2BAA2B,EAAEL,gBAAgB,EAAEE,MAAM,EAAEC,GAAG,EAAEC,UAAU,CAAC;IACnF,OAAO;MACLE,GAAG,EAAE,SAASA,GAAGA,CAAA,EAAG;QAElB,IAAIC,KAAK,GAAG,IAAI;QAChBA,KAAK,CAACC,cAAc,GAAGD,KAAK,CAACC,cAAc,IAAI,CAAC,CAAC;QACjD,IAAIC,cAAc,GAAGF,KAAK,CAACC,cAAc,CAACL,GAAG,CAAC;QAC9C,IAAIM,cAAc,EAAE;UAClB,OAAOA,cAAc;QACvB;QACA,IAAIC,WAAW,GAAG,IAAIb,SAAS,CAACF,OAAO,CAACY,KAAK,CAACI,OAAO,EAAEZ,aAAa,EAAEC,gBAAgB,EAAEC,OAAO,IAAI;UACjGW,WAAW,EAAE;QACf,CAAC,CAAC;QACFL,KAAK,CAACC,cAAc,CAACL,GAAG,CAAC,GAAGO,WAAW;QACvC,OAAOA,WAAW;MACpB,CAAC;MACDG,GAAG,EAAE,SAASA,GAAGA,CAAA,EAAG;QAClB,MAAM,IAAIC,KAAK,CAAC,yDAAyD,CAAC;MAC5E;IACF,CAAC;EACH,CAAC;AACH,CAAC;AACD,IAAIC,QAAQ,GAAGjB,QAAQ;AACvBL,OAAO,CAACE,OAAO,GAAGoB,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}