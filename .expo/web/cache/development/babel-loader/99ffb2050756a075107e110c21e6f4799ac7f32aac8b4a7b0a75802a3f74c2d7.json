{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useState, useEffect, useCallback } from 'react';\nimport { container } from \"../../infrastructure/di/container\";\nexport var useLentItems = function useLentItems() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    items = _useState2[0],\n    setItems = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    error = _useState6[0],\n    setError = _useState6[1];\n  var _useState7 = useState('dueDate'),\n    _useState8 = _slicedToArray(_useState7, 2),\n    sortBy = _useState8[0],\n    setSortBy = _useState8[1];\n  var _useState9 = useState('active'),\n    _useState0 = _slicedToArray(_useState9, 2),\n    filterBy = _useState0[0],\n    setFilterBy = _useState0[1];\n  var _useState1 = useState(''),\n    _useState10 = _slicedToArray(_useState1, 2),\n    searchQuery = _useState10[0],\n    setSearchQuery = _useState10[1];\n  var getLentItemsUseCase = container.getGetLentItemsUseCase();\n  var markItemReturnedUseCase = container.getMarkItemReturnedUseCase();\n  var loadItems = useCallback(_asyncToGenerator(function* () {\n    try {\n      setLoading(true);\n      setError(null);\n      var params = {\n        sortBy: sortBy,\n        filterBy: filterBy,\n        searchQuery: searchQuery.trim() || undefined\n      };\n      var loadedItems = yield getLentItemsUseCase.execute(params);\n      setItems(loadedItems);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load items');\n    } finally {\n      setLoading(false);\n    }\n  }), [sortBy, filterBy, searchQuery]);\n  var markAsReturned = function () {\n    var _ref2 = _asyncToGenerator(function* (itemId) {\n      try {\n        console.log('markAsReturned called with itemId:', itemId);\n        var updatedItem = yield markItemReturnedUseCase.execute(itemId);\n        console.log('Item marked as returned:', updatedItem);\n        yield loadItems();\n        console.log('Items reloaded');\n      } catch (err) {\n        console.error('Error marking item as returned:', err);\n        throw err;\n      }\n    });\n    return function markAsReturned(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var refresh = function refresh() {\n    loadItems();\n  };\n  useEffect(function () {\n    loadItems();\n  }, [loadItems]);\n  return {\n    items: items,\n    loading: loading,\n    error: error,\n    sortBy: sortBy,\n    setSortBy: setSortBy,\n    filterBy: filterBy,\n    setFilterBy: setFilterBy,\n    searchQuery: searchQuery,\n    setSearchQuery: setSearchQuery,\n    markAsReturned: markAsReturned,\n    refresh: refresh\n  };\n};","map":{"version":3,"names":["useState","useEffect","useCallback","container","useLentItems","_useState","_useState2","_slicedToArray","items","setItems","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","_useState7","_useState8","sortBy","setSortBy","_useState9","_useState0","filterBy","setFilterBy","_useState1","_useState10","searchQuery","setSearchQuery","getLentItemsUseCase","getGetLentItemsUseCase","markItemReturnedUseCase","getMarkItemReturnedUseCase","loadItems","_asyncToGenerator","params","trim","undefined","loadedItems","execute","err","Error","message","markAsReturned","_ref2","itemId","console","log","updatedItem","_x","apply","arguments","refresh"],"sources":["/app/src/presentation/hooks/useLentItems.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { ILentItem } from '@/domain/entities/LentItem';\nimport { container } from '@/infrastructure/di/container';\nimport { GetLentItemsParams, SortOption, FilterOption } from '@/domain/usecases/GetLentItemsUseCase';\n\nexport const useLentItems = () => {\n  const [items, setItems] = useState<ILentItem[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [sortBy, setSortBy] = useState<SortOption>('dueDate');\n  const [filterBy, setFilterBy] = useState<FilterOption>('active');\n  const [searchQuery, setSearchQuery] = useState('');\n\n  const getLentItemsUseCase = container.getGetLentItemsUseCase();\n  const markItemReturnedUseCase = container.getMarkItemReturnedUseCase();\n\n  const loadItems = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const params: GetLentItemsParams = {\n        sortBy,\n        filterBy,\n        searchQuery: searchQuery.trim() || undefined,\n      };\n      const loadedItems = await getLentItemsUseCase.execute(params);\n      setItems(loadedItems);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load items');\n    } finally {\n      setLoading(false);\n    }\n  }, [sortBy, filterBy, searchQuery]);\n\n  const markAsReturned = async (itemId: string) => {\n    try {\n      console.log('markAsReturned called with itemId:', itemId);\n      const updatedItem = await markItemReturnedUseCase.execute(itemId);\n      console.log('Item marked as returned:', updatedItem);\n      await loadItems(); // Reload items\n      console.log('Items reloaded');\n    } catch (err) {\n      console.error('Error marking item as returned:', err);\n      throw err;\n    }\n  };\n\n  const refresh = () => {\n    loadItems();\n  };\n\n  useEffect(() => {\n    loadItems();\n  }, [loadItems]);\n\n  return {\n    items,\n    loading,\n    error,\n    sortBy,\n    setSortBy,\n    filterBy,\n    setFilterBy,\n    searchQuery,\n    setSearchQuery,\n    markAsReturned,\n    refresh,\n  };\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}