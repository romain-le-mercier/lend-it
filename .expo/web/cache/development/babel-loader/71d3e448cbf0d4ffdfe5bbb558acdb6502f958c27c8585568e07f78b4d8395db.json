{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nexport var MarkItemReturnedUseCase = function () {\n  function MarkItemReturnedUseCase(lentItemRepository) {\n    _classCallCheck(this, MarkItemReturnedUseCase);\n    this.lentItemRepository = lentItemRepository;\n  }\n  return _createClass(MarkItemReturnedUseCase, [{\n    key: \"execute\",\n    value: function () {\n      var _execute = _asyncToGenerator(function* (itemId, returnDate) {\n        var item = yield this.lentItemRepository.getById(itemId);\n        if (!item) {\n          throw new Error('Item not found');\n        }\n        if (item.isReturned) {\n          throw new Error('Item is already marked as returned');\n        }\n        return yield this.lentItemRepository.markAsReturned(itemId, returnDate);\n      });\n      function execute(_x, _x2) {\n        return _execute.apply(this, arguments);\n      }\n      return execute;\n    }()\n  }]);\n}();","map":{"version":3,"names":["MarkItemReturnedUseCase","lentItemRepository","_classCallCheck","_createClass","key","value","_execute","_asyncToGenerator","itemId","returnDate","item","getById","Error","isReturned","markAsReturned","execute","_x","_x2","apply","arguments"],"sources":["/app/src/domain/usecases/MarkItemReturnedUseCase.ts"],"sourcesContent":["import { ILentItem } from '../entities/LentItem';\nimport { ILentItemRepository } from '../repositories/ILentItemRepository';\n\nexport interface IMarkItemReturnedUseCase {\n  execute(itemId: string, returnDate?: Date): Promise<ILentItem>;\n}\n\nexport class MarkItemReturnedUseCase implements IMarkItemReturnedUseCase {\n  constructor(private lentItemRepository: ILentItemRepository) {}\n\n  async execute(itemId: string, returnDate?: Date): Promise<ILentItem> {\n    const item = await this.lentItemRepository.getById(itemId);\n    \n    if (!item) {\n      throw new Error('Item not found');\n    }\n    \n    if (item.isReturned) {\n      throw new Error('Item is already marked as returned');\n    }\n\n    return await this.lentItemRepository.markAsReturned(itemId, returnDate);\n  }\n}"],"mappings":";;;AAOA,WAAaA,uBAAuB;EAClC,SAAAA,wBAAoBC,kBAAuC,EAAE;IAAAC,eAAA,OAAAF,uBAAA;IAAA,KAAzCC,kBAAuC,GAAvCA,kBAAuC;EAAG;EAAC,OAAAE,YAAA,CAAAH,uBAAA;IAAAI,GAAA;IAAAC,KAAA;MAAA,IAAAC,QAAA,GAAAC,iBAAA,CAE/D,WAAcC,MAAc,EAAEC,UAAiB,EAAsB;QACnE,IAAMC,IAAI,SAAS,IAAI,CAACT,kBAAkB,CAACU,OAAO,CAACH,MAAM,CAAC;QAE1D,IAAI,CAACE,IAAI,EAAE;UACT,MAAM,IAAIE,KAAK,CAAC,gBAAgB,CAAC;QACnC;QAEA,IAAIF,IAAI,CAACG,UAAU,EAAE;UACnB,MAAM,IAAID,KAAK,CAAC,oCAAoC,CAAC;QACvD;QAEA,aAAa,IAAI,CAACX,kBAAkB,CAACa,cAAc,CAACN,MAAM,EAAEC,UAAU,CAAC;MACzE,CAAC;MAAA,SAZKM,OAAOA,CAAAC,EAAA,EAAAC,GAAA;QAAA,OAAAX,QAAA,CAAAY,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAPJ,OAAO;IAAA;EAAA;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}